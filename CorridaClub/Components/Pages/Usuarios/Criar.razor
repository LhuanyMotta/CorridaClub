@page "/usuarios/criar"
@using CorridaClub.Controllers
@using CorridaClub.Models
@inject UsuarioController UsuarioController
@inject NavigationManager Navigation

<h3>Criar Novo Usuário</h3>

<EditForm Model="@novoUsuario" OnValidSubmit="@SalvarUsuario">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="form-group">
        <label for="nome">Nome:</label>
        <InputText id="nome" class="form-control" @bind-Value="novoUsuario.Nome" />
    </div>

    <div class="form-group">
        <label for="email">Email:</label>
        <InputText id="email" class="form-control" @bind-Value="novoUsuario.Email" />
    </div>

    <div class="form-group">
        <label for="senha">Senha:</label>
        <InputText type="password" id="senha" class="form-control" @bind-Value="novoUsuario.Senha" />
    </div>

    <div class="form-group">
        <label for="tipo">Tipo de Membro:</label>
        <InputSelect id="tipo" class="form-control" @bind-Value="novoUsuario.TipoMembro">
            <option value="">Selecione...</option>
            <option value="Atleta">Atleta</option>
            <option value="Organizador">Organizador</option>
            <option value="Admin">Administrador</option>
        </InputSelect>
    </div>

    <button type="submit" class="btn btn-primary">Salvar</button>
    <a href="/usuarios" class="btn btn-secondary">Cancelar</a>
</EditForm>

@code {
    private Usuario novoUsuario = new();

    private async Task SalvarUsuario()
    {
        await UsuarioController.Adicionar(novoUsuario);
        Navigation.NavigateTo("/usuarios");
    }
}