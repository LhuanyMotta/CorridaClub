@page "/eventos/criar"
@using CorridaClub.Controllers
@using CorridaClub.Models
@inject EventoController EventoController
@inject NavigationManager Navigation

<h3>Criar Novo Evento</h3>

<EditForm Model="@novoEvento" OnValidSubmit="@SalvarEvento">
    <DataAnnotationsValidator />
    <ValidationSummary />

    <div class="form-group">
        <label for="nome">Nome do Evento:</label>
        <InputText id="nome" class="form-control" @bind-Value="novoEvento.Nome" />
    </div>

    <div class="form-group">
        <label for="data">Data:</label>
        <InputDate id="data" class="form-control" @bind-Value="novoEvento.Data" />
    </div>

    <div class="form-group">
        <label for="local">Local:</label>
        <InputText id="local" class="form-control" @bind-Value="novoEvento.Local" />
    </div>

    <div class="form-group">
        <label for="distancia">Distância (km):</label>
        <InputNumber id="distancia" class="form-control" @bind-Value="novoEvento.Distancia" />
    </div>

    <div class="form-group">
        <label for="tipo">Tipo de Corrida:</label>
        <InputSelect id="tipo" class="form-control" @bind-Value="novoEvento.Tipo">
            <option value="5km">5km</option>
            <option value="10km">10km</option>
            <option value="Meia Maratona">Meia Maratona (21km)</option>
            <option value="Maratona">Maratona (42km)</option>
        </InputSelect>
    </div>

    <div class="form-group">
        <label for="descricao">Descrição:</label>
        <InputTextArea id="descricao" class="form-control" @bind-Value="novoEvento.Descricao" />
    </div>

    <button type="submit" class="btn btn-primary">Salvar</button>
    <a href="/eventos" class="btn btn-secondary">Cancelar</a>
</EditForm>

@code {
    private Evento novoEvento = new();

    private async Task SalvarEvento()
    {
        await EventoController.Adicionar(novoEvento);
        Navigation.NavigateTo("/eventos");
    }
}